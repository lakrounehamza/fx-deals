# ğŸ’± FX Deals â€” Data Warehouse Service

### Description
**FX Deals** est une application Spring Boot conÃ§ue pour gÃ©rer et importer des donnÃ©es de transactions financiÃ¨res (Foreign Exchange Deals).  
Elle permet de **sauvegarder**, **consulter** et **importer en masse** des transactions dans une base de donnÃ©es MySQL, tout en garantissant la **validation** et la **cohÃ©rence** des donnÃ©es.

---

## ğŸš€ FonctionnalitÃ©s principales

- âœ… Enregistrement dâ€™un deal unique (`POST /api/v1/deals`)
- ğŸ“„ RÃ©cupÃ©ration dâ€™un deal par ID (`GET /api/v1/deals/{id}`)
- ğŸ“¦ Importation de plusieurs deals en une seule requÃªte (`POST /api/v1/deals/batch`)
- âš ï¸ Gestion des erreurs :
    - Deal dÃ©jÃ  existant (`DuplicateDealException`)
    - DonnÃ©es invalides (`InvalidDealDataException`)
    - Deal non trouvÃ© (`DealNotFoundException`)
- ğŸ§© Validation des donnÃ©es avec **Jakarta Validation**
- ğŸ—„ï¸ Persistance avec **Spring Data JPA** et **MySQL**
- ğŸ³ Support complet de **Docker & Docker Compose**

---

## ğŸ§  Architecture du projet

```text
src/
 â”œâ”€â”€ controller/
 â”‚   â””â”€â”€ DealController.java       â†’ GÃ¨re les endpoints REST
 â”œâ”€â”€ service/
 â”‚   â”œâ”€â”€ DealServiceImpl.java      â†’ Contient la logique mÃ©tier
 â”‚   â””â”€â”€ IDealService.java         â†’ Interface du service
 â”œâ”€â”€ entity/
 â”‚   â””â”€â”€ Deal.java                 â†’ ReprÃ©sente la table `deals`
 â”œâ”€â”€ repository/
 â”‚   â””â”€â”€ DealRepository.java       â†’ Interface JPA pour accÃ©der Ã  la base
 â”œâ”€â”€ dto/
 â”‚   â”œâ”€â”€ DealRequestDto.java       â†’ DonnÃ©es reÃ§ues depuis lâ€™API
 â”‚   â””â”€â”€ DealResponseDto.java      â†’ DonnÃ©es renvoyÃ©es Ã  lâ€™utilisateur
 â”œâ”€â”€ mapper/
 â”‚   â””â”€â”€ DealMapper.java           â†’ Conversion entre DTO et entitÃ©
 â”œâ”€â”€ exception/
 â”‚   â”œâ”€â”€ DuplicateDealException.java
 â”‚   â”œâ”€â”€ InvalidDealDataException.java
 â”‚   â”œâ”€â”€ DealNotFoundException.java
 â”‚   â””â”€â”€ GlobalExceptionHandler.java
 â””â”€â”€ FxDealsApplication.java       â†’ Point dâ€™entrÃ©e de lâ€™application
# ğŸ§° Installation et exÃ©cution

## 1ï¸âƒ£ Cloner le projet
```bash
git clone https://github.com/lakrounehamza/fx-deals.git
cd fx-deals
```

## 2ï¸âƒ£ Configurer les variables de la base de donnÃ©es
Dans `src/main/resources/application.yml` :
```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/fx_deals_db
    username: root
    password: root
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
```

## 3ï¸âƒ£ Lancer avec Docker
Assure-toi que **Docker** et **Docker Compose** sont installÃ©s, puis exÃ©cute :
```bash
docker-compose up --build
```

Cela dÃ©marrera :
- un conteneur **MySQL** (`fx_deals_mysql`)
- un conteneur **Spring Boot App** (`fx_deals_app`)

---

# ğŸ§ª Exemples dâ€™appels API

## â• Ajouter un deal
**POST** `/api/v1/deals`
```json
{
  "id": "FX123456",
  "fromCurrency": "USD",
  "toCurrency": "EUR",
  "dealTimestamp": "2025-11-12T09:30:00",
  "dealAmount": 12000.50
}
```

### RÃ©ponse :
```json
{
  "id": "FX123456",
  "fromCurrency": "USD",
  "toCurrency": "EUR",
  "dealTimestamp": "2025-11-12T09:30:00",
  "dealAmount": 12000.5
}
```

## ğŸ“„ RÃ©cupÃ©rer un deal
**GET** `/api/v1/deals/FX123456`
```json
{
  "id": "FX123456",
  "fromCurrency": "USD",
  "toCurrency": "EUR",
  "dealTimestamp": "2025-11-12T09:30:00",
  "dealAmount": 12000.5
}
```

## ğŸ“¦ Importer plusieurs deals
**POST** `/api/v1/deals/batch`
```json
[
  {
    "id": "FX1001",
    "fromCurrency": "GBP",
    "toCurrency": "USD",
    "dealTimestamp": "2025-11-12T11:00:00",
    "dealAmount": 5000
  },
  {
    "id": "FX1002",
    "fromCurrency": "EUR",
    "toCurrency": "JPY",
    "dealTimestamp": "2025-11-12T11:05:00",
    "dealAmount": 10000
  }
]
```

---

# âš ï¸ Gestion des exceptions

| Exception | Cause | Code HTTP |
|------------|--------|-----------|
| `DuplicateDealException` | Lâ€™ID du deal existe dÃ©jÃ  | `400 Bad Request` |
| `InvalidDealDataException` | FromCurrency = ToCurrency | `400 Bad Request` |
| `DealNotFoundException` | Aucun deal trouvÃ© avec cet ID | `404 Not Found` |

---

# ğŸ§‘â€ğŸ’» Auteur
**ğŸ‘¨â€ğŸ’» Hamza Lakrouine**  
ğŸ“ Ã‰tudiant en dÃ©veloppement Full Stack Ã  YouCode  
ğŸ”— [GitHub](https://github.com/lakrounehamza)

---

# ğŸ Objectif du projet
Ce projet a Ã©tÃ© rÃ©alisÃ© dans le cadre dâ€™un test technique pour le poste de **Java Developer** chez **ProgressSoft Corporation**, portant sur la crÃ©ation dâ€™un **Clustered Data Warehouse** pour lâ€™analyse des FX Deals.
